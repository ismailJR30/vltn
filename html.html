<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>üíñ mobile spark ¬∑ moving NO</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent; /* remove grey flash on tap */
        }

        body {
            font-family: 'Segoe UI', 'Quicksand', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            background: linear-gradient(145deg, #ffdee9 0%, #ffd0dd 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 10px;
            position: relative;
            overflow-x: hidden;
            touch-action: manipulation; /* improve tap responsiveness */
        }

        /* sparkly overlay */
        .sparkles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .spark {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            box-shadow: 0 0 18px 5px #ffa5c0, 0 0 30px 10px #ffd3e0;
            animation: sparkleFloat 3.5s infinite ease-in-out;
            opacity: 0;
        }

        @keyframes sparkleFloat {
            0% { transform: scale(0.3) translateY(0) rotate(0deg); opacity: 0.9; }
            50% { transform: scale(1.4) translateY(-25px) rotate(180deg); opacity: 0.5; }
            100% { transform: scale(0.2) translateY(-55px) rotate(360deg); opacity: 0; }
        }

        /* main card */
        .valentine-card {
            background: rgba(255, 248, 250, 0.85);
            backdrop-filter: blur(8px);
            border-radius: 50px 50px 40px 40px;
            box-shadow: 0 20px 35px rgba(210, 70, 120, 0.4), 0 0 0 4px #fff9, 0 0 0 10px #ffb7cb;
            max-width: 480px;
            width: 100%;
            padding: 1.8rem 1.2rem 2.5rem;
            text-align: center;
            z-index: 10;
            border: 2px solid white;
        }

        /* photo frame */
        .photo-frame {
            width: 160px;
            height: 160px;
            margin: 0 auto 0.8rem;
            border-radius: 50%;
            background: #ffe2ec;
            box-shadow: 0 0 0 5px white, 0 18px 25px -8px #c45a7a;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 3px solid #ff99bb;
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .photo-placeholder {
            width: 100%;
            height: 100%;
            background: #ffc1d4;
            background-image: repeating-linear-gradient(45deg, #ffadc2 0px, #ffadc2 10px, #ffbdd2 10px, #ffbdd2 20px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #a13358;
            font-weight: bold;
            font-size: 0.9rem;
            border-radius: 50%;
            text-shadow: 0 2px 4px white;
        }

        .heart-icon {
            font-size: 2.4rem;
            filter: drop-shadow(0 4px 4px #ff89a8);
            margin-bottom: 5px;
        }

        /* text zone */
        .text-zone {
            background: rgba(255, 245, 250, 0.8);
            border-radius: 60px;
            padding: 1.2rem 1rem;
            margin: 1rem 0 1.8rem 0;
            box-shadow: inset 0 3px 10px #ffdbea, 0 10px 15px #ffb5cc;
            border: 3px solid white;
        }

        .dynamic-question {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #db3d60, #b32049);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 8px #ffeef2, 2px 2px 0 #ffe0e9;
            line-height: 1.3;
        }

        .cute-sub {
            font-size: 1.2rem;
            color: #aa1f4b;
            margin-top: 8px;
            font-style: italic;
            font-weight: 500;
        }

        /* BUTTON PANEL */
        .button-panel {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            position: relative;
            min-height: 130px;
            width: 100%;
            touch-action: pan-y pinch-zoom; /* allow some gestures but not interfere */
        }

        .btn {
            font-size: 2rem;
            font-weight: 700;
            padding: 0.8rem 2.2rem;
            border: none;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 10px 0 #973b58, 0 12px 20px rgba(170, 70, 100, 0.5);
            transition: transform 0.1s, box-shadow 0.1s;
            font-family: inherit;
            letter-spacing: 2px;
            background: #ffd0da;
            color: #570e25;
            border: 4px solid #fff9;
            transform: translateY(-3px);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .btn-yes {
            background: #ff8aa8;
            box-shadow: 0 10px 0 #b33b5c, 0 14px 22px #ff9bb6;
            color: #2d0418;
            font-size: 2.4rem;
            padding: 0.8rem 2.8rem;
            flex-shrink: 0;
        }

        .btn-no {
            background: #fad4e0;
            color: #440d21;
            box-shadow: 0 10px 0 #995b73, 0 14px 22px #e09eb5;
            position: absolute !important; /* force absolute for moving */
            left: auto; right: auto; top: auto; bottom: auto;
            transition: left 0.2s cubic-bezier(0.2, 1.2, 0.5, 1.2), top 0.2s cubic-bezier(0.2, 1.2, 0.5, 1.2);
            z-index: 50;
            max-width: 45%; /* prevent going too wide */
            white-space: nowrap;
        }

        /* YES button hover (desktop friendly, but fine on mobile) */
        .btn-yes:active {
            transform: scale(0.97) translateY(-1px);
            box-shadow: 0 6px 0 #b33b5c, 0 10px 18px #ff9bb6;
        }

        /* final page */
        .final-page {
            display: none;
            text-align: center;
            background: #ffeef4;
            border-radius: 60px;
            padding: 2.5rem 1.5rem;
            max-width: 500px;
            box-shadow: 0 25px 40px #f79ebe, 0 0 0 10px white, 0 0 0 14px #ffb7cf;
            animation: bounceIn 0.6s ease-out;
            border: 6px solid #ffb0c3;
            z-index: 30;
            width: 100%;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            60% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .best-text {
            font-size: 3.2rem;
            font-weight: 900;
            color: #c72e5a;
            text-shadow: 0 5px 0 #ffe2ec, 0 10px 18px #ffacc0;
            margin: 0.5rem 0;
            line-height: 1.2;
            word-break: break-word;
        }

        .heart-burst {
            font-size: 4rem;
            filter: drop-shadow(0 6px 8px #ff809f);
            margin: 15px 0;
            animation: heartbeat 1.2s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            30% { transform: scale(1.3); }
            50% { transform: scale(1.1); }
            70% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .host-note {
            margin-top: 25px;
            background: rgba(255,255,240,0.7);
            border-radius: 40px;
            padding: 10px 15px;
            font-size: 0.9rem;
            color: #942952;
            border: 2px dashed #ff98af;
        }
    </style>
</head>
<body>
    <div class="sparkles" id="sparklesContainer"></div>

    <!-- PAGE 1 -->
    <div id="page1" class="valentine-card">
        <div class="photo-frame" id="photoFrame">
            <!-- space for a photo: replace src if you like -->
            <img src="c:\Users\GIGABYTE\Downloads\24657291-1833-4221-8090-497fe6fe0968.jpg" alt="valentine" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22200%22%20height%3D%22200%22%20viewBox%3D%220%200%20200%20200%22%3E%3Ccircle%20cx%3D%22100%22%20cy%3D%22100%22%20r%3D%2298%22%20fill%3D%22%23ffc1d0%22%20stroke%3D%22%23ff6699%22%20stroke-width%3D%226%22%2F%3E%3Ctext%20x%3D%2250%22%20y%3D%22120%22%20font-size%3D%2226%22%20fill%3D%22%23942b50%22%20font-weight%3D%22bold%22%3Eüì∏%20us%3C%2Ftext%3E%3C%2Fsvg%3E';">
        </div>

        <div class="text-zone">
            <div class="dynamic-question" id="questionLine">will you be my valentine?</div>
            <div class="cute-sub" id="subLine">( i'm kinda nervous... )</div>
        </div>

        <div class="button-panel" id="buttonPanel">
            <button class="btn btn-yes" id="yesBtn">YES</button>
            <button class="btn btn-no" id="noBtn">NO</button>
        </div>
        <div class="host-note">
            üíï share this link ‚Äî mobile friendly ¬∑ the NO really runs
        </div>
    </div>

    <!-- PAGE 2 (hidden) -->
    <div id="page2" class="final-page">
        <div class="heart-burst">‚ù§Ô∏è‚Äçüî•üíñ‚ù§Ô∏è‚Äçüî•</div>
        <div class="best-text">BEST VALENTINE'S<br>DAY EVER</div>
        <div class="heart-burst">üíóüíóüíó</div>
        <p style="font-size: 1.8rem; margin: 1rem 0; color:#b13b62;">you said YES! ü•≥</p>
        <div style="margin-top: 20px;">‚ú® infinite sparkles for you two ‚ú®</div>
    </div>

    <script>
        (function() {
            // ---- SPARKLES (unchanged) ----
            const sparklesContainer = document.getElementById('sparklesContainer');
            for (let i = 0; i < 35; i++) {
                const spark = document.createElement('div');
                spark.classList.add('spark');
                const size = 4 + Math.random() * 10;
                spark.style.width = size + 'px';
                spark.style.height = size + 'px';
                spark.style.left = Math.random() * 100 + '%';
                spark.style.top = Math.random() * 100 + '%';
                spark.style.animationDelay = Math.random() * 3 + 's';
                spark.style.boxShadow = `0 0 ${12 + Math.random()*20}px 4px #ffa5c9, 0 0 30px 8px #ffc1d6`;
                sparklesContainer.appendChild(spark);
            }

            // ---- DOM elements ----
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            const page1 = document.getElementById('page1');
            const page2 = document.getElementById('page2');
            const buttonPanel = document.getElementById('buttonPanel');
            const questionLine = document.getElementById('questionLine');
            const subLine = document.getElementById('subLine');

            const questions = [
                "be my Valentine?",
                "pretty please? üíò",
                "say yes?",
                "choose YES üíï",
                "forever?",
                "be mine?",
                "xoxo, say yes"
            ];
            const subs = [
                "( i'm kinda nervous... )",
                "( you're the cutest )",
                "( no takes a hike! )",
                "( click yes, i dare you )",
                "( pinky promise? )",
                "( hehe )",
                "( best decision ever )"
            ];

            // ---- mobile-optimized move function (uses both touch and mouse) ----
            function moveNoButton() {
                if (!noBtn || !buttonPanel) return;

                // ensure button is absolutely positioned relative to panel
                noBtn.style.position = 'absolute';

                const panelRect = buttonPanel.getBoundingClientRect();
                const btnRect = noBtn.getBoundingClientRect();

                // available space inside panel (with a small margin)
                const maxLeft = Math.max(10, panelRect.width - btnRect.width - 10);
                const maxTop = Math.max(10, panelRect.height - btnRect.height - 10);

                // safety if panel too small
                if (maxLeft < 5 || maxTop < 5) {
                    // fallback: move a little
                    noBtn.style.left = '10px';
                    noBtn.style.top = '10px';
                    return;
                }

                // generate random coordinates (use integers)
                const randomLeft = Math.floor(Math.random() * maxLeft);
                const randomTop = Math.floor(Math.random() * maxTop);

                noBtn.style.left = randomLeft + 'px';
                noBtn.style.top = randomTop + 'px';
                noBtn.style.right = 'auto';
                noBtn.style.bottom = 'auto';

                // update playful text
                const randomIdx = Math.floor(Math.random() * questions.length);
                questionLine.innerText = questions[randomIdx];
                subLine.innerText = subs[randomIdx];
            }

            // ---- make sure panel is relative and button starts as absolute ----
            if (buttonPanel) {
                buttonPanel.style.position = 'relative';
                buttonPanel.style.touchAction = 'none'; // prevent page scroll while touching inside panel (helps with noBtn move)
            }
            if (noBtn) {
                noBtn.style.position = 'absolute';
                // set a decent initial position (right side)
                noBtn.style.left = '220px';  // will be adjusted after layout
                noBtn.style.top = '15px';
            }

            // ---- ATTACH EVENT LISTENERS (mobile first) ----
            // use touchstart + mousedown + mouseenter for cross device

            // function to trigger move and stop event propagation
            function triggerMove(e) {
                // for touch events, prevent default to avoid scrolling/zoom
                if (e.cancelable) e.preventDefault();
                e.stopPropagation();  // avoid weird bubbling

                moveNoButton();

                // also try to prevent any possible click after move
                return false;
            }

            // add listeners for both touch and mouse
            if (noBtn) {
                // touch on phones (this is the most reliable)
                noBtn.addEventListener('touchstart', triggerMove, { passive: false });

                // for mouse users (desktop & some tablets with mouse)
                noBtn.addEventListener('mouseenter', triggerMove);
                noBtn.addEventListener('mousedown', triggerMove);  // in case they click fast

                // also if they manage to click (just in case)
                noBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    moveNoButton();
                    return false;
                });
            }

            // ---- YES button action ----
            yesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                page1.style.display = 'none';
                page2.style.display = 'block';
                // add final sparkles
                for (let i = 0; i < 12; i++) {
                    const extraSpark = document.createElement('div');
                    extraSpark.classList.add('spark');
                    extraSpark.style.left = Math.random() * 100 + '%';
                    extraSpark.style.top = Math.random() * 100 + '%';
                    extraSpark.style.width = '14px';
                    extraSpark.style.height = '14px';
                    extraSpark.style.background = '#fff9b0';
                    extraSpark.style.boxShadow = '0 0 30px 10px #ff99bb';
                    extraSpark.style.animation = 'sparkleFloat 2s infinite';
                    sparklesContainer.appendChild(extraSpark);
                }
            });
            // also support touch on yes
            yesBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                page1.style.display = 'none';
                page2.style.display = 'block';
            }, { passive: false });

            // ---- ensure NO button stays inside on resize and after layout ----
            function clampNoButtonPosition() {
                if (!noBtn || !buttonPanel) return;
                const panelRect = buttonPanel.getBoundingClientRect();
                const btnRect = noBtn.getBoundingClientRect();

                let left = parseFloat(noBtn.style.left);
                let top = parseFloat(noBtn.style.top);

                // if left/top are NaN (not set), set default
                if (isNaN(left)) left = panelRect.width - btnRect.width - 20;
                if (isNaN(top)) top = 15;

                const maxLeft = Math.max(0, panelRect.width - btnRect.width - 5);
                const maxTop = Math.max(0, panelRect.height - btnRect.height - 5);

                left = Math.min(maxLeft, Math.max(5, left));
                top = Math.min(maxTop, Math.max(5, top));

                noBtn.style.left = left + 'px';
                noBtn.style.top = top + 'px';
            }

            window.addEventListener('load', function() {
                setTimeout(clampNoButtonPosition, 50); // wait for layout
            });

            window.addEventListener('resize', function() {
                clampNoButtonPosition();
            });

            // also move when the user tries to drag from button (extra safety)
            noBtn.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });

            // disable context menu on no button (avoid long-press menu on phones)
            noBtn.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });

            // ---- final: dynamic sparkle color change (just for fun) ----
            setInterval(() => {
                const sparks = document.querySelectorAll('.spark');
                sparks.forEach(s => {
                    if (Math.random() > 0.8) {
                        s.style.background = `hsl(${340 + Math.random()*30}, 100%, 85%)`;
                    }
                });
            }, 1500);
        })();
    </script>
</body>
</html>